# 3 初回起動、使用準備

## 3.1 初回起動

Burp Suiteは、Java実行可能ファイル（拡張子 .jar）として配布されています。
このJARファイルをダブルクリックするだけで起動できますが、メモリサイズなどを指定するため、次のようにコマンドラインからの起動をお勧めします。

```
java -Xmx1024m -jar /path/to/burp.jar
```

これは、1024MBのメモリをBurpに割り当ててBurpを起動する例です。

### 3.1.1 コマンドライン引数

Burpには、いくつかのコマンドライン引数があります。

* --config-file

指定したファイルから設定を読み込みます。
ユーザ設定とプロジェクト設定（後述）など、複数のファイルに設定が分かれている場合、このオプションを複数指定して読み込みができます。

* --disable-extensions

起動時に拡張機能を読み込まないようにするオプションです。
Burpは起動時に拡張機能を自動的に読み込みます。何らかの拡張機能の不具合でBurpが起動しなくなってしまった場合、このオプションを使用して拡張機能の自動読み込みを抑止できます。

* --project-file

プロフェッショナル版専用のオプションです。保存してあるプロジェクトファイルを読み込みます。

その他全てのコマンドライン引数を確認するには、次のように ```--help```を付けて実行してください。

```
java -jar /path/to/burp.jar --help
```

### 3.1.2 起動バッチファイル

これらのコマンドライン引数を、起動のたびに毎回指定するのは面倒です。よく使うコマンドラインオプションを指定したバッチファイルを作り、ダブルクリックだけで起動したいところです。ただし、Burp Suiteがバージョンアップするとjarファイルのファイル名が変わるため、アップデートのたびにバッチの修正またはファイル名の変更が必要になってしまいます。

はせがわようすけ氏が、最新バージョンのjarファイルを自動的に探して起動するスクリプトを公開しています。
jarファイルの保存先フォルダと、コマンドライン引数を適宜書き換えて利用してください。

[https://gist.github.com/hasegawayosuke/71729d508f903a7dd42e](https://gist.github.com/hasegawayosuke/71729d508f903a7dd42e)

## 3.1.3 Burp Suiteのアップデート

Burp Suiteを起動すると、自動的に最新バージョンのチェックが行われます。
もし、現在起動しているバージョンより新しいバージョンがリリースされていると、Burp Suiteはそれを通知します。

無償版では、最新のBurp SuiteをダウンロードするためのURLが表示されますので、そのページにアクセスしダウンロードしてください。

![Burp Suite 無償版のアップデート通知画面]()

プロフェッショナル版では、UIから最新版のダウンロードと、最新版での再起動が可能です。

![Burp Suite プロフェッショナル版のアップデート通知画面]()

## 3.2 起動ウィザード

Burp Suiteを起動すると、数秒間スプラッシュスクリーンが表示され、その後起動ウィザードが開きます。

![起動ウィザード プロジェクト選択画面]()

最初にプロジェクトの種類を選ぶ画面が表示されますが、無償版ではTemporary projectしか選択できませんので、そのまま次へ進みます。
プロフェッショナル版では、Burp Suiteのログなどをディスクに保存する、ディスクベースのプロジェクト機能があり、その新規作成、または既存のプロジェクトファイルの読み込みができます。

次に、設定ファイルを指定する画面が表示されます。

![起動ウィザード 設定ファイル選択選択画面]()

初めてBurp Suiteを起動する場合は、「Use Burp defaults」を選択した状態で、「Start Burp」ボタンをクリックします。

Burp Suiteの設定ファイルを保存（後述）していて、その設定ファイルを読み込む場合は、「Choose file」ボタンから設定ファイルを選択してください。設定ファイルは、複数のファイルが指定できます。
コマンドライン引数で設定ファイルを指定している場合は、この設定選択ウィザード画面は表示されません。

本ガイドラインでは、デフォルト設定の状態を前提に解説を進めますので、設定を変更している場合は適宜読み替えてください。
設定をデフォルトに戻すには、起動ウィザードで「Use Burp defaults」を選択して起動する、または次のようにメニューから設定のリセットが行えます。

* 「Burp」メニュー→「Project options」→「Restore defaults」→「All」
* 「Burp」メニュー→「User options」→「Restore defaults」

![設定リセットメニュー]()

## 3.3 Burp Suiteの設定

### 3.3.1 表示設定

Burp Suiteを本格的に使う前に、表示設定を見直しておくことを推奨します。
表示設定は、「User options」タブ→「Display」で行います。

![Displayオプション画面]()

User Interfaceセクションで、Burp Suite全体のUIの見た目を設定できます。
ここで、好みのフォントサイズと、ルック・アンド・フィールを選択してください。
設定を反映させるには、Burp Suiteの再起動が必要です。

HTTP Message Display では、HTTPメッセージエディタで表示されるHTTPリクエストやレスポンスのフォントなどが指定できます。
こちらも、好みのフォントやフォントサイズを指定してください。設定を変更するとすぐにメッセージエディタに反映されます。
デフォルトで指定されているCourier Newフォントは英字フォントのため、日本語文字が表示できません。
"Arial Unicode MS"や"MS ゴシック"などの日本語フォントを推奨します。

### 3.3.2 Proxy設定

Burp Suiteの心臓部である、Proxyの設定を行います。

「Proxy」タブ→「Options」を確認してください。

![Proxyオプション画面]()

Proxy Listenersセクションにはデフォルトのプロキシリスナーが設定されています。
Interfaceが"127.0.0.1:8080"となった行が１つあり、問題なければRunning列にチェックが付いているはずです。
もしチェックが付いていない場合はチェックボックスをクリックしてみて、それでもチェックが付かない場合は、8080ポートが他のアプリケーションで使われてしまっている可能性があります。左側のEditボタンをクリックし、バインドするポート番号を他のポート番号に変えて、チェックボックスがオンになるか確認してください。

この状態で「Proxy」タブ→「Intercept」に移動し、インターセプト状態を一旦オフにします。UI上のボタンが「Intercept is off」となっていることを確認してください。「Intercept is on」になっている場合はボタンをクリックし、「Intercept is off」に変更します。

次に、ブラウザのプロキシ設定を行います。
ブラウザのプロキシ設定で、HTTPとHTTPS両方のプロトコルの設定についてアドレス（デフォルトは127.0.0.1）とポート（デフォルトは8080）を指定し、例外設定は空にします。

![IEのプロキシ設定画面]()

この状態で、ブラウザで適当なページアクセスしてみてください。もし設定がうまくいっていれば、「Proxy」タブ→「HTTP history」にアクセスしたページに関するログが、どんどんと追加されているはずです。

![Proxy履歴画面]()

### 3.3.3 設定の保存
Burp Suiteには、ユーザ設定とプロジェクト設定の２種類の設定があります。
ユーザ設定には、フォントなどUIの見た目、ホットキーなど操作に関する設定、上位プロキシ設定、拡張機能などユーザ固有の設定が含まれます。プロジェクト設定には、ターゲットスコープ、プロキシリスナー、リダイレクトやヘッダなど詳細なHTTPオプション、SSL設定など、診断対象に関する設定が含まれます。

各設定はファイルに保存ができます。好みの設定を起動時に指定する場合や、設定を他人と共有する場合に便利です。

設定を全ての保存するには、Burpメニューから保存操作を行ってください。

* 「Burp」メニュー→「User options」→「Save」
* 「Burp」メニュー→「Project options」→「Save」

![設定保存メニュー]()

特定の設定だけ指定した保存または読み込みが可能です。
保存したい設定項目にある、左側のオプションボタンをクリックし、「Save」または「Load」を選択してください。
またこのオプションボタンから、個別設定項目のリセットも可能です。

![パネルのオプションボタン]()
